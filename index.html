<!DOCTYPE html>
<html lang="ru" data-theme="glow">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ryazhenka CFW — Nintendo Switch Custom Firmware</title>
  <meta name="description" content="Ryazhenka — стабильная кастомная прошивка для Nintendo Switch. Glow/terminal стиль, crew-экосистема, релизы, инструкции, скриншоты." />
  <link rel="icon" href="./assets/Ryazhalogo.png" />
  <link rel="stylesheet" href="./styles/style.css" />
  <script defer src="./scripts/main.js"></script>
</head>
<body>
  <header class="top">
    <div class="wrap brand">
      <div class="brand-left">
        <img alt="Ryazhenka" class="logo" src="./assets/Ryazhalogo.png" onclick="location.href='./'" />
        <div class="title glow">Ryazhenka CFW</div>
      </div>
      <div class="badges">
        <a class="badge" href="https://t.me/Ryazhenkabestcfw" target="_blank">Telegram</a>
        <a class="badge" href="https://boosty.to/dimasick-git/donate" target="_blank">Boosty</a>
        <a class="badge" href="https://www.youtube.com/@Dimaick-git" target="_blank">YouTube</a>
        <div class="toggle" title="Glow ↔ Classic Terminal">
          Glow <div class="switch" id="themeSwitch"><span class="thumb"></span></div> Classic
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="panel" id="crew-banner">
      <div class="ascii">Ryazhenka // crew.ecosystem</div>
      <p class="muted">Добро пожаловать в экосистему Ryazhenka: Atmosphere + Hekate + Tesla + плагины + наши утилиты.</p>
      <div class="cta">
        <a class="btn primary" href="#install">Установить сейчас</a>
        <a class="btn" href="#changelog">История изменений</a>
        <a class="btn" href="#wiki">Документация / Wiki</a>
        <a class="btn" href="https://github.com/Dimasick-git/Ryzhenka/discussions" target="_blank">Обсуждения</a>
      </div>
    </section>

    <section class="panel" id="changelog">
      <h2 class="glow">История изменений / Релизы</h2>
      <div class="releases" id="releases-list"></div>
      <div class="cta">
        <a class="btn" href="https://github.com/Dimasick-git/Ryzhenka/releases" target="_blank">Все релизы</a>
      </div>
    </section>

    <section class="panel" id="components">
      <h2 class="glow">Компоненты</h2>
      <div class="components">
        <a class="comp" href="https://github.com/AGraber/Ryujinx-Overlay" target="_blank">
          <img src="https://raw.githubusercontent.com/AGraber/Ryujinx-Overlay/main/icon.png" alt="Ryazhahand Overlay" />
          <div>
            <h3>Ryazhahand Overlay</h3>
            <p>Оверлей для управления и мониторинга прямо в играх.</p>
          </div>
        </a>
        <a class="comp" href="https://github.com/Atmosphere-NX/Atmosphere" target="_blank">
          <img src="https://raw.githubusercontent.com/Atmosphere-NX/Atmosphere/master/docs/assets/logo.png" alt="Atmosphere" />
          <div>
            <h3>Atmosphere</h3>
            <p>Основная CFW-платформа для Switch. Совместима и стабильна.</p>
          </div>
        </a>
        <a class="comp" href="https://github.com/CTCaer/hekate" target="_blank">
          <img src="https://raw.githubusercontent.com/CTCaer/hekate/master/docs/logo.png" alt="Hekate" />
          <div>
            <h3>Hekate</h3>
            <p>Загрузчик/менеджер, профили, инжект, бэкапы NAND.</p>
          </div>
        </a>
        <a class="comp" href="https://github.com/WerWolv/Tesla-Menu" target="_blank">
          <img src="https://raw.githubusercontent.com/WerWolv/Tesla-Menu/master/icon.png" alt="Tesla Menu" />
          <div>
            <h3>Tesla Menu</h3>
            <p>Оверлей-меню для плагинов и быстрых действий в системе.</p>
          </div>
        </a>
      </div>
    </section>

    <section class="panel" id="install">
      <h2 class="glow">Установка</h2>
      <ol>
        <li>Скачайте последний релиз из раздела <a href="#changelog">История изменений</a>.</li>
        <li>Распакуйте содержимое на карту microSD, сохраните существующие бэкапы.</li>
        <li>Запустите через Hekate или ваш метод загрузки.</li>
        <li>Откройте Tesla Menu, настройте плагины и оверлеи.</li>
      </ol>
    </section>

    <section class="panel" id="wiki">
      <h2 class="glow">Документация и связь</h2>
      <nav class="links">
        <a href="https://github.com/Dimasick-git/Ryzhenka/wiki" target="_blank">Wiki / Руководства</a>
        <a href="https://github.com/Dimasick-git/Ryzhenka/discussions" target="_blank">Обсуждения</a>
        <a href="https://github.com/Dimasick-git/Ryzhenka/issues" target="_blank">Issues / Баг-репорты</a>
        <a href="https://boosty.to/dimasick-git/donate" target="_blank">Поддержать</a>
      </nav>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="badges">
        <a class="badge" href="https://t.me/Ryazhenkabestcfw" target="_blank">Telegram</a>
        <a class="badge" href="https://boosty.to/dimasick-git/donate" target="_blank">Boosty</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('themeSwitch')?.addEventListener('click', () => {
      const html = document.documentElement;
      html.dataset.theme = html.dataset.theme === 'classic' ? 'glow' : 'classic';
    });

    const owner = 'Dimasick-git';
    const repo = 'Ryzhenka';
    const api = `https://api.github.com/repos/${owner}/${repo}/releases?per_page=100`;
    const listEl = document.getElementById('releases-list');

    function fmtDate(iso) {
      try {
        const d = new Date(iso);
        return d.toLocaleDateString('ru-RU', { year: 'numeric', month: 'short', day: 'numeric' });
      } catch (e) {
        return '';
      }
    }

    function imgUrl(version) {
      return `https://github.com/${owner}/${repo}/releases/download/${version}/bbootlogo.png`;
    }

    function mkCard(r) {
      const card = document.createElement('article');
      card.className = 'release-card';
      const ver = r.tag_name || r.name || '';
      const img = document.createElement('img');
      img.alt = `Лого ${ver}`;
      img.loading = 'lazy';
      img.src = imgUrl(ver);
      card.appendChild(img);
      const h3 = document.createElement('h3');
      h3.textContent = r.name || ver;
      card.appendChild(h3);
      const meta = document.createElement('div');
      meta.className = 'meta';
      const date = document.createElement('span');
      date.textContent = fmtDate(r.published_at || r.created_at);
      const vspan = document.createElement('span');
      vspan.textContent = ver;
      meta.append(date, vspan);
      card.appendChild(meta);
      if (r.body) {
              const p = document.createElement('p');
        p.textContent = r.body.length > 300 ? r.body.slice(0, 300) + '…' : r.body;
        card.appendChild(p);
      }
      const link = document.createElement('a');
      link.className = 'btn';
      link.href = r.html_url;
      link.target = '_blank';
      link.textContent = 'Открыть релиз';
      card.appendChild(link);
      return card;
    }

    async function loadReleases() {
      try {
        const res = await fetch(api);
        if (!res.ok) throw new Error('Ошибка загрузки релизов');
        const data = await res.json();
        data.forEach(r => {
          const card = mkCard(r);
          listEl.appendChild(card);
        });
      } catch (e) {
        listEl.innerHTML = '<p class="muted">Не удалось загрузить релизы. Попробуйте позже.</p>';
        console.error(e);
      }
    }

    loadReleases();
  </script>
</body>
</html>

