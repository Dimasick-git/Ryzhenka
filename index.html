<!DOCTYPE html>
<html lang="ru" data-theme="glow">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ryazhenka — AI-styled CFW for Nintendo Switch</title>
  <meta name="description" content="Ryazhenka — стабильная кастомная прошивка для Nintendo Switch. Glow/terminal стиль, crew-экосистема, релизы и галерея генеративных превью." />
  <link rel="icon" href="./assets/Ryazhalogo.png" />
  <link rel="stylesheet" href="./styles/style.css" />
  <script defer src="./scripts/main.js"></script>
  <style>
    /* Midjourney-like aesthetic: big hero, dark gradient, card glass, rounded gallery */
    :root{
      --bg:#05060a;
      --panel:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      --accent:#7c5cff;
      --muted:#9aa0a6;
      --glass: rgba(255,255,255,0.03);
      --card-bg: rgba(255,255,255,0.02);
    }
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background: radial-gradient(1200px 400px at 10% 10%, rgba(124,92,255,0.09), transparent), radial-gradient(1000px 300px at 90% 90%, rgba(0,200,255,0.03), transparent), var(--bg); color:#e7eef6}
    .wrap{max-width:1100px;margin:0 auto;padding:1rem}
    header.top{padding:1.25rem 0}
    .brand{display:flex;align-items:center;justify-content:space-between;gap:1rem}
    .brand-left{display:flex;align-items:center;gap:0.75rem}
    .logo{width:56px;height:56px;border-radius:10px;cursor:pointer}
    .title{font-weight:700;font-size:1.25rem;letter-spacing:0.6px}
    .muted{color:var(--muted)}

    /* Hero */
    .hero{padding:3.25rem 1rem;border-radius:12px;background:linear-gradient(180deg, rgba(124,92,255,0.14), rgba(0,0,0,0.12));box-shadow:0 6px 30px rgba(0,0,0,0.6);display:grid;grid-template-columns:1fr 380px;gap:1.25rem;align-items:center}
    .hero h1{font-size:2.25rem;margin:0;line-height:1.02}
    .hero p{margin:.5rem 0 1rem;color:var(--muted);max-width:58ch}
    .cta{display:flex;gap:.5rem;flex-wrap:wrap}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:.5rem .75rem;border-radius:8px;color:inherit;text-decoration:none}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#39d6ff);border:0;color:#0b0e12;font-weight:700}

    /* Releases + Filters */
    .controls{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
    .search{padding:.5rem .75rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .select{padding:.45rem .6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}

    .releases{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-top:1rem}
    .release-card{background:var(--card-bg);padding:1rem;border-radius:12px;display:flex;flex-direction:column;gap:.5rem;min-height:180px;border:1px solid rgba(255,255,255,0.02)}
    .release-card img{width:100%;height:140px;object-fit:cover;border-radius:8px;background:#05060a}
    .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:0.85rem}
    .assets{display:flex;flex-direction:column;gap:.25rem;margin-top:.25rem}
    .asset{display:flex;gap:.5rem;align-items:center;font-size:0.9rem}

    /* Crew */
    .crew-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem}
    .crew-card{display:flex;gap:.75rem;align-items:center;padding:.6rem;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:10px}
    .crew-card img{width:56px;height:56px;border-radius:10px;object-fit:cover}

    /* Gallery */
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:0.75rem}
    .gallery img{width:100%;height:160px;object-fit:cover;border-radius:10px;cursor:pointer;transition:transform .2s ease;box-shadow:0 8px 24px rgba(0,0,0,0.6)}
    .gallery img:hover{transform:translateY(-6px) scale(1.02)}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(3,4,7,0.6);display:flex;align-items:center;justify-content:center;z-index:1000;padding:2rem}
    .modal .inner{max-width:900px;width:100%;border-radius:12px;overflow:hidden}
    .modal img{width:100%;display:block}

    /* FAQ & Roadmap */
    .faq{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}
    .panel{background:var(--panel);padding:1rem;border-radius:10px}

    footer{margin-top:2rem;padding:1.5rem 0;color:var(--muted)}
<!DOCTYPE html>
<html lang="ru" data-theme="glow">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ryazhenka — CFW for Nintendo Switch</title>
  <meta name="description" content="Ryazhenka — стабильная кастомная прошивка для Nintendo Switch. Релизы, галерея и статистика." />
  <link rel="icon" href="./assets/Ryazhalogo.png" />
  <style>
    :root{ --bg:#05060a; --muted:#9aa0a6; --card-bg: rgba(255,255,255,0.02); --accent:#7c5cff }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:var(--bg);color:#e7eef6}
    .wrap{max-width:1100px;margin:0 auto;padding:1rem}
    .brand{display:flex;align-items:center;justify-content:space-between}
    .logo{width:56px;height:56px;border-radius:10px}
    .muted{color:var(--muted)}
    .hero{padding:2rem;border-radius:12px;background:linear-gradient(180deg, rgba(124,92,255,0.06), rgba(0,0,0,0.06));display:flex;gap:1rem}
    .releases{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-top:1rem}
    .release-card{background:var(--card-bg);padding:1rem;border-radius:10px}
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.75rem;margin-top:.75rem}
    .crew-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.75rem;margin-top:.75rem}
    .btn{display:inline-block;padding:.4rem .6rem;border-radius:8px;background:rgba(255,255,255,0.03);color:inherit;text-decoration:none}
    footer{margin-top:1.5rem;color:var(--muted)}
  </style>
</head>
<body>
  <header class="wrap brand">
    <div style="display:flex;gap:.75rem;align-items:center">
      <img src="./assets/Ryazhalogo.png" class="logo" alt="Ryazhenka" />
      <div>
        <div style="font-weight:700">Ryazhenka CFW</div>
        <div class="muted" style="font-size:0.9rem">Стабильная кастомная прошивка для Nintendo Switch</div>
      </div>
    </div>
    <div style="display:flex;gap:.5rem;align-items:center">
      <a class="btn" href="https://t.me/Ryazhenkabestcfw" target="_blank">Telegram</a>
      <a class="btn" href="https://boosty.to/dimasick-git/donate" target="_blank">Boosty</a>
      <a class="btn" href="https://github.com/Dimasick-git/Ryzhenka" target="_blank">GitHub</a>
      <a class="btn" href="https://www.youtube.com/@Dimaick-git" target="_blank">YouTube</a>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div style="flex:1">
        <h1>Ryazhenka — сборка и релизы</h1>
        <p class="muted">Агрегируем релизы из вашего аккаунта и популярных компонентов Nintendo Switch (Atmosphere, Hekate, libnx и др.).</p>
        <div style="margin-top:.5rem"><a class="btn" href="#changelog">Релизы</a> <a class="btn" href="#gallery">Галерея</a></div>
      </div>
      <aside style="width:320px">
        <div style="background:var(--card-bg);padding:1rem;border-radius:8px">
          <h4 style="margin:0 0 .5rem 0">Статистика</h4>
          <div id="statsGitHub" class="muted">Загрузка…</div>
          <div style="margin-top:.5rem"><button id="refreshStats" class="btn">Обновить</button></div>
        </div>
      </aside>
    </section>

    <section id="changelog">
      <h2>Релизы</h2>
      <div style="display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem">
        <input id="searchReleases" placeholder="Поиск" style="flex:1;padding:.4rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit" />
        <select id="filterType" style="padding:.4rem;border-radius:8px;background:transparent;color:inherit">
          <option value="all">Все</option>
          <option value="Ryazhenkabestcfw">BestCFW</option>
          <option value="Ryazhenka_AIO">AIO</option>
          <option value="Ryazhenka_lite">Lite</option>
        </select>
        <button id="refreshReleases" class="btn">Обновить</button>
      </div>
      <div id="releases-list" class="releases"></div>
    </section>

    <section id="gallery">
      <h2>Галерея</h2>
      <div id="galleryGrid" class="gallery"></div>
    </section>

    <section id="crew">
      <h2>Команда</h2>
      <div id="crew-grid" class="crew-grid"></div>
    </section>

    <section id="comments" style="margin-top:1rem">
      <h2>Комментарии</h2>
      <div id="utterances-container"></div>
      <div id="local-comments" style="display:none;margin-top:.5rem">
        <form id="commentForm" style="display:flex;flex-direction:column;gap:.5rem">
          <input id="commentName" placeholder="Имя" />
          <textarea id="commentText" placeholder="Комментарий" style="min-height:80px"></textarea>
          <div style="display:flex;gap:.5rem"><button class="btn" type="submit">Отправить</button><button id="clearComments" class="btn" type="button">Очистить</button></div>
        </form>
        <div id="commentsList"></div>
      </div>
    </section>

  </main>

  <footer class="wrap">
    <div style="display:flex;justify-content:space-between;align-items:center;width:100%">
      <div class="muted">© Ryazhenka — Dimasick-git</div>
      <div class="muted">YouTube: <a href="https://www.youtube.com/@Dimaick-git" target="_blank">@Dimaick-git</a></div>
    </div>
  </footer>

  <script>
    // Basic aggregator: owner + popular Switch components
    const owner = 'Dimasick-git';
    const repo = 'Ryzhenka';
    const releasesApi = `https://api.github.com/repos/${owner}/${repo}/releases?per_page=100`;
    const contributorsApi = `https://api.github.com/repos/${owner}/${repo}/contributors?per_page=100`;
    const listEl = document.getElementById('releases-list');
    const crewGrid = document.getElementById('crew-grid');
    const galleryGrid = document.getElementById('galleryGrid');

    const manualCrew = [
      { login: 'Dimasick-git', role: 'Автор' },
      { login: 'Ryazhenka-Helper-1', role: 'Помощник' },
      { login: 'Ryazhenka-Helper-01', role: 'Помощник' }
    ];

    const popularComponents = [
      { owner: 'Atmosphere-NX', repo: 'Atmosphere' },
      { owner: 'CTCaer', repo: 'hekate' },
      { owner: 'Switchbrew', repo: 'libnx' },
      { owner: 'yifanlu', repo: 'Tesla' }
    ];

    let releasesData = [];

    function fmtDate(iso){ if(!iso) return ''; try{ return new Date(iso).toLocaleDateString('ru-RU'); }catch(e){return iso;} }

    function makeCard(r){
      const el = document.createElement('div'); el.className = 'release-card';
      const title = document.createElement('div'); title.style.fontWeight='700'; title.textContent = r.name || r.tag_name || '';
      el.appendChild(title);
      const meta = document.createElement('div'); meta.className='muted'; meta.textContent = fmtDate(r.published_at||r.created_at) + (r.__source?(' • '+r.__source):''); el.appendChild(meta);
      if(r.body){ const p=document.createElement('p'); p.className='muted'; p.textContent = r.body.slice(0,200); el.appendChild(p); }
      if(r.assets && r.assets.length){
        const list = document.createElement('div'); r.assets.forEach(a=>{ const ael=document.createElement('div'); const link=document.createElement('a'); link.href=a.browser_download_url; link.target='_blank'; link.textContent=a.name + (a.download_count?(' ('+a.download_count+')'):''); ael.appendChild(link); list.appendChild(ael); }); el.appendChild(list);
      }
      return el;
    }

    async function loadOwnerReleases(ownerName, limitRepos=30, perRepo=3){
      try{
        const reposRes = await fetch(`https://api.github.com/users/${ownerName}/repos?per_page=100`);
        if(!reposRes.ok) return [];
        const repos = await reposRes.json();
        const sel = repos.slice(0, limitRepos);
        const out=[];
        for(const r of sel){
          try{ const rr = await fetch(`https://api.github.com/repos/${ownerName}/${r.name}/releases?per_page=${perRepo}`); if(!rr.ok) continue; const rels = await rr.json(); rels.forEach(rel=>{ rel.__source = ownerName + '/' + r.name; out.push(rel); }); }catch(e){ }
        }
        return out;
      }catch(e){ return []; }
    }

    async function loadReposReleases(list, perRepo=2){
      const out=[];
      for(const it of list){
        try{ const rr = await fetch(`https://api.github.com/repos/${it.owner}/${it.repo}/releases?per_page=${perRepo}`); if(!rr.ok) continue; const rels = await rr.json(); rels.forEach(rel=>{ rel.__source = it.owner + '/' + it.repo; out.push(rel); }); }catch(e){ }
      }
      return out;
    }

    async function loadReleases(){
      listEl.innerHTML = '<div class="muted">Загрузка релизов…</div>';
      try{
        const [ownerR, popularR, mainR] = await Promise.all([
          loadOwnerReleases(owner, 60, 3),
          loadReposReleases(popularComponents, 2),
          fetch(releasesApi).then(r=>r.ok? r.json():[]).catch(()=>[])
        ]);
        const combined = [];
        ownerR.forEach(x=>combined.push(x));
        popularR.forEach(x=>combined.push(x));
        (mainR||[]).forEach(x=>{ x.__source = owner+'/'+repo; combined.push(x); });
        // dedupe
        const seen = new Set(); const ded=[];
        combined.sort((a,b)=> new Date(b.published_at||b.created_at)-new Date(a.published_at||a.created_at));
        for(const it of combined){ const key = it.html_url || (it.id?String(it.id): (it.tag_name||it.name||'')); if(!key) continue; if(seen.has(key)) continue; seen.add(key); ded.push(it); }
        releasesData = ded.slice(0,200);
        renderReleases(); renderGallery();
      }catch(e){ listEl.innerHTML = '<div class="muted">Ошибка загрузки релизов.</div>'; console.error(e); }
    }

    function renderReleases(){
      const q = document.getElementById('searchReleases').value || '';
      const type = document.getElementById('filterType').value || 'all';
      listEl.innerHTML='';
      const filtered = releasesData.filter(r=>{ const txt=(r.name||r.tag_name||'')+' '+(r.body||''); return (!q || txt.toLowerCase().includes(q.toLowerCase())) && (type==='all' || (r.assets||[]).some(a=> (a.name||'').toLowerCase().includes(type.toLowerCase()))); });
      document.getElementById('releases-list').innerHTML='';
      if(filtered.length===0){ listEl.innerHTML='<div class="muted">Релизов не найдено.</div>'; return; }
      filtered.forEach(r=> listEl.appendChild(makeCard(r)));
    }

    function renderGallery(){ galleryGrid.innerHTML=''; releasesData.forEach(r=>{ const imgAsset = (r.assets||[]).find(a=>/\.(png|jpe?g|gif|webp)$/i.test(a.name||'')); const src = imgAsset?imgAsset.browser_download_url: (r.assets&&r.assets[0]&&r.assets[0].browser_download_url) || ''; if(!src) return; const img=document.createElement('img'); img.src=src; img.alt=r.name||r.tag_name||''; img.style.width='100%'; img.style.borderRadius='8px'; galleryGrid.appendChild(img); }); }

    async function loadCrew(){ crewGrid.innerHTML='<div class="muted">Загрузка…</div>'; try{ const res=await fetch(contributorsApi); const contrib = res.ok? await res.json() : []; const people = contrib.map(c=>({ login:c.login, avatar:c.avatar_url, contributions:c.contributions })); manualCrew.forEach(m=>{ if(!people.find(p=>p.login.toLowerCase()===m.login.toLowerCase())) people.unshift({ login:m.login, avatar:`https://github.com/${m.login}.png`, contributions:0 }); }); crewGrid.innerHTML=''; people.forEach(p=>{ const card=document.createElement('div'); card.style.background='var(--card-bg)'; card.style.padding='.5rem'; card.style.borderRadius='8px'; const a=document.createElement('a'); a.href=`https://github.com/${p.login}`; a.target='_blank'; a.textContent=p.login; card.appendChild(a); crewGrid.appendChild(card); }); }catch(e){ crewGrid.innerHTML='<div class="muted">Не удалось загрузить участников.</div>'; }
    }

    // Comments: Utterances + local fallback
    function loadUtterances(){ const c=document.getElementById('utterances-container'); if(!c) return; const s=document.createElement('script'); s.src='https://utteranc.es/client.js'; s.async=true; s.setAttribute('repo','Dimasick-git/Ryzhenka'); s.setAttribute('issue-term','pathname'); s.setAttribute('theme','github-light'); s.crossOrigin='anonymous'; s.onerror=()=>{ document.getElementById('local-comments').style.display='block'; }; c.appendChild(s); }

    // Stats (tokenless): sum of asset.download_count across aggregated releases
    async function fetchStats(){ const el=document.getElementById('statsGitHub'); el.innerHTML='Загрузка…'; try{ const repoRes = await fetch(`https://api.github.com/repos/${owner}/${repo}`); const repoJson = repoRes.ok?await repoRes.json():{}; const stars=repoJson.stargazers_count||0; const forks=repoJson.forks_count||0; let total=0, ownerTotal=0; (releasesData||[]).forEach(r=> (r.assets||[]).forEach(a=>{ if(typeof a.download_count==='number'){ total+=a.download_count; if((r.__source||'').toLowerCase().startsWith(owner.toLowerCase()+'/')) ownerTotal+=a.download_count; } })); el.innerHTML=`⭐ ${stars} • 🍴 ${forks} • ⬇️ Ваши: ${ownerTotal} • Всего: ${total} <div class="muted" style="margin-top:.3rem">Уникальные скачивания/просмотры: требуют серверной интеграции (GitHub traffic API).</div>`; }catch(e){ el.innerHTML='<div class="muted">Не удалось загрузить статистику.</div>'; }}

    // Init
    (function(){ document.getElementById('refreshReleases').addEventListener('click', loadReleases); document.getElementById('searchReleases').addEventListener('input', renderReleases); document.getElementById('filterType').addEventListener('change', renderReleases); document.getElementById('refreshStats').addEventListener('click', fetchStats); loadReleases(); loadCrew(); loadUtterances(); setInterval(()=>{ loadReleases(); fetchStats(); }, 1000*60*5); window.RZ={loadReleases, loadCrew}; })();
  </script>
</body>
</html>