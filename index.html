<!DOCTYPE html>
<html lang="ru" data-theme="glow">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ryazhenka ‚Äî AI-styled CFW for Nintendo Switch</title>
  <meta name="description" content="Ryazhenka ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –∫–∞—Å—Ç–æ–º–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è Nintendo Switch. Glow/terminal —Å—Ç–∏–ª—å, crew-—ç–∫–æ—Å–∏—Å—Ç–µ–º–∞, —Ä–µ–ª–∏–∑—ã –∏ –≥–∞–ª–µ—Ä–µ—è –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–µ–≤—å—é." />
  <link rel="icon" href="./assets/Ryazhalogo.png" />
  <link rel="stylesheet" href="./styles/style.css" />
  <script defer src="./scripts/main.js"></script>
  <style>
    /* Midjourney-like aesthetic: big hero, dark gradient, card glass, rounded gallery */
    :root{
      --bg:#05060a;
      --panel:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      --accent:#7c5cff;
      --muted:#9aa0a6;
      --glass: rgba(255,255,255,0.03);
      --card-bg: rgba(255,255,255,0.02);
    }
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background: radial-gradient(1200px 400px at 10% 10%, rgba(124,92,255,0.09), transparent), radial-gradient(1000px 300px at 90% 90%, rgba(0,200,255,0.03), transparent), var(--bg); color:#e7eef6}
    .wrap{max-width:1100px;margin:0 auto;padding:1rem}
    header.top{padding:1.25rem 0}
    .brand{display:flex;align-items:center;justify-content:space-between;gap:1rem}
    .brand-left{display:flex;align-items:center;gap:0.75rem}
    .logo{width:56px;height:56px;border-radius:10px;cursor:pointer}
    .title{font-weight:700;font-size:1.25rem;letter-spacing:0.6px}
    .muted{color:var(--muted)}

    /* Hero */
    .hero{padding:3.25rem 1rem;border-radius:12px;background:linear-gradient(180deg, rgba(124,92,255,0.14), rgba(0,0,0,0.12));box-shadow:0 6px 30px rgba(0,0,0,0.6);display:grid;grid-template-columns:1fr 380px;gap:1.25rem;align-items:center}
    .hero h1{font-size:2.25rem;margin:0;line-height:1.02}
    .hero p{margin:.5rem 0 1rem;color:var(--muted);max-width:58ch}
    .cta{display:flex;gap:.5rem;flex-wrap:wrap}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:.5rem .75rem;border-radius:8px;color:inherit;text-decoration:none}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#39d6ff);border:0;color:#0b0e12;font-weight:700}

    /* Releases + Filters */
    .controls{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
    .search{padding:.5rem .75rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .select{padding:.45rem .6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}

    .releases{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-top:1rem}
    .release-card{background:var(--card-bg);padding:1rem;border-radius:12px;display:flex;flex-direction:column;gap:.5rem;min-height:180px;border:1px solid rgba(255,255,255,0.02)}
    .release-card img{width:100%;height:140px;object-fit:cover;border-radius:8px;background:#05060a}
    .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:0.85rem}
    .assets{display:flex;flex-direction:column;gap:.25rem;margin-top:.25rem}
    .asset{display:flex;gap:.5rem;align-items:center;font-size:0.9rem}

    /* Crew */
    .crew-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem}
    .crew-card{display:flex;gap:.75rem;align-items:center;padding:.6rem;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:10px}
    .crew-card img{width:56px;height:56px;border-radius:10px;object-fit:cover}

    /* Gallery */
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:0.75rem}
    .gallery img{width:100%;height:160px;object-fit:cover;border-radius:10px;cursor:pointer;transition:transform .2s ease;box-shadow:0 8px 24px rgba(0,0,0,0.6)}
    .gallery img:hover{transform:translateY(-6px) scale(1.02)}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(3,4,7,0.6);display:flex;align-items:center;justify-content:center;z-index:1000;padding:2rem}
    .modal .inner{max-width:900px;width:100%;border-radius:12px;overflow:hidden}
    .modal img{width:100%;display:block}

    /* FAQ & Roadmap */
    .faq{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}
    .panel{background:var(--panel);padding:1rem;border-radius:10px}

    footer{margin-top:2rem;padding:1.5rem 0;color:var(--muted)}

    /* theme toggle */
    .toggle{cursor:pointer;user-select:none;display:inline-flex;align-items:center;gap:0.5rem;padding:0.25rem 0.5rem;border-radius:999px;background:rgba(255,255,255,0.02)}

    @media (max-width:900px){
      .hero{grid-template-columns:1fr}
    }
    /* Classic / terminal theme overrides (applied when html[data-theme="classic"]) */
    html[data-theme="classic"]{
      --bg:#070707;
      --panel:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      --accent:#39d6ff;
      --muted:#7f8a90;
      --glass: rgba(255,255,255,0.02);
      --card-bg: rgba(255,255,255,0.01);
      font-family: 'Courier New', ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Segoe UI Mono', monospace;
    }
    html[data-theme="classic"] body{background: radial-gradient(900px 300px at 10% 10%, rgba(57,214,255,0.02), transparent), radial-gradient(800px 200px at 90% 90%, rgba(124,92,255,0.02), transparent), var(--bg); color:#cfe7ff}
    /* Additional themes */
    html[data-theme="solarized"]{
      --bg:#002b36;
      --panel:linear-gradient(180deg, rgba(38,139,210,0.02), rgba(0,0,0,0.00));
      --accent:#b58900;
      --muted:#93a1a1;
      --card-bg: rgba(255,255,255,0.01);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    html[data-theme="solarized"] body{background: radial-gradient(800px 240px at 10% 10%, rgba(181,137,0,0.03), transparent), var(--bg); color:#e6efed}
    html[data-theme="neon"]{
      --bg:#030014;
      --panel:linear-gradient(180deg, rgba(57,214,255,0.03), rgba(124,92,255,0.02));
      --accent:#ff2d95;
      --muted:#9fb1c3;
      --card-bg: rgba(255,255,255,0.02);
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
    }
    html[data-theme="neon"] body{background: radial-gradient(1000px 300px at 10% 10%, rgba(255,45,149,0.04), transparent), var(--bg); color:#ffdff0}
    /* highlight GIF previews in gallery */
    .gallery img[data-is-gif="1"]{box-shadow:0 18px 48px rgba(57,214,255,0.12);border:2px solid rgba(57,214,255,0.05)}
  /* Comments UI */
  .comments-form input, .comments-form textarea{width:100%;box-sizing:border-box}
  .comment-card{background:var(--card-bg);padding:.6rem;border-radius:8px;margin-bottom:.5rem;border:1px solid rgba(255,255,255,0.02)}

  /* Widgets */
  .widget{background:var(--card-bg);padding:.6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.02);margin-bottom:.75rem}
  </style>
</head>
<body>
  <header class="top">
    <div class="wrap brand">
      <div class="brand-left">
        <img alt="Ryazhenka" class="logo" src="./assets/Ryazhalogo.png" onclick="location.href='./'" />
        <div>
          <div class="title">Ryazhenka CFW ‚Äî crew.ecosystem</div>
          <div class="muted" style="font-size:0.9rem;margin-top:4px;">–°—Ç–∞–±–∏–ª—å–Ω–∞—è –∫–∞—Å—Ç–æ–º–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è Nintendo Switch ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Å —É–¥–æ–±–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–ª–∞–≥–∏–Ω–∞–º–∏.</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:.6rem">
        <div class="top .badges" style="display:flex;gap:.5rem;align-items:center;flex-wrap:wrap">
          <a class="badge btn" href="https://t.me/Ryazhenkabestcfw" target="_blank">Telegram</a>
          <a class="badge btn" href="https://boosty.to/dimasick-git/donate" target="_blank">Boosty</a>
          <a class="badge btn" href="https://github.com/Dimasick-git/Ryzhenka" target="_blank">GitHub</a>
          <a class="badge btn" href="https://www.youtube.com/@Dimaick-git" target="_blank">YouTube</a>
        </div>
        <div class="toggle" id="themeToggle" title="Glow ‚Üî Classic Terminal">Glow <div class="switch" id="themeSwitch" style="margin:0 8px;"><span class="thumb"></span></div> Classic</div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div id="newReleasesNotice" style="display:none;margin-bottom:0.75rem;padding:.5rem;border-radius:8px;background:linear-gradient(90deg,rgba(124,92,255,0.06),rgba(0,200,255,0.03));">
      <span id="newReleasesCount">–ù–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã –¥–æ—Å—Ç—É–ø–Ω—ã</span>
      <button class="btn" id="showNewReleases" style="margin-left:.5rem">–ü–æ–∫–∞–∑–∞—Ç—å</button>
    </div>
    <section class="hero panel">
      <div>
        <h1>Ryazhenka ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è CFW, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π —ç—Å—Ç–µ—Ç–∏–∫–æ–π</h1>
        <p>–ú—ã —Å–æ–±–∏—Ä–∞–µ–º –ª—É—á—à–µ–µ –∏–∑ Atmosphere, Hekate, Tesla –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞, —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞–º–∏ –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî —Ç–µ–ø–µ—Ä—å —Å –ø—Ä–µ–≤—å—é —Ä–µ–ª–∏–∑–æ–≤, –≥–∞–ª–µ—Ä–µ–µ–π –∏ –Ω–æ–≤—ã–º–∏ —Ñ–∏—á–∞–º–∏.</p>
        <div class="cta">
          <a class="btn primary" href="#install">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</a>
          <a class="btn" href="#changelog">–†–µ–ª–∏–∑—ã</a>
          <a class="btn" href="#gallery">–ì–∞–ª–µ—Ä–µ—è</a>
          <a class="btn" href="#wiki">Wiki</a>
        </div>
        <div style="margin-top:1rem;color:var(--muted)">–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–∏–¥–±–µ–∫ –≤ Discussions.</div>
      </div>

      <aside>
        <div class="panel">
          <h3 style="margin:0 0 .5rem 0">–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏—á–∏</h3>
          <ul style="margin:0;padding-left:1rem;color:var(--muted)">
            <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–ª–∏–∑—ã —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –∏ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π</li>
            <li>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è –ø—Ä–µ–≤—å—é –∏ –ø—Ä–µ—Å–µ—Ç–æ–≤</li>
            <li>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tesla Menu –∏ Ryazhahand Overlay</li>
            <li>–†–µ–∂–∏–º—ã: AIO / Lite / BestCFW</li>
            <li>Roadmap –∏ –∞–≤—Ç–æ-–∏–º–ø–æ—Ä—Ç issues —Å –º–µ—Ç–∫–æ–π <code>roadmap</code></li>
            <li>Integrity checker ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π</li>
            <li>Plugin marketplace ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–∑ UI</li>
            <li>Auto-update notifier ‚Äî –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ä–µ–ª–∏–∑–∞—Ö –∏ –Ω–æ—á–Ω—ã–µ —Å–±–æ—Ä–∫–∏</li>
            <li>One-click rollback ‚Äî –æ—Ç–∫–∞—Ç –¥–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏</li>
          </ul>
        </div>

        <div style="margin-top:.75rem" class="panel">
          <h4 style="margin:0 0 .5rem 0">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
          <div class="muted">Telegram ‚Ä¢ Discussions ‚Ä¢ Issues</div>
          <div style="margin-top:.5rem"><a class="btn" href="https://github.com/Dimasick-git/Ryzhenka/discussions" target="_blank">–û–±—Å—É–∂–¥–µ–Ω–∏—è</a></div>
        </div>
      </aside>
    </section>

    <!-- Components / Aggregated releases -->
    <section class="panel" id="components">
      <h2>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã / –°–≤–µ–∂–∏–µ —Ä–µ–ª–∏–∑—ã</h2>
      <p class="muted">–°–æ–±–∏—Ä–∞–µ–º —Å–≤–µ–∂–∏–µ —Ä–µ–ª–∏–∑—ã –∏–∑ –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Atmosphere, Hekate). –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –≤ —Å–∫—Ä–∏–ø—Ç–µ.</p>
      <div style="display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem">
        <div class="controls">
          <button class="btn" id="tabMyReleases">–ú–æ–∏ —Ä–µ–ª–∏–∑—ã</button>
          <button class="btn" id="tabFresh">–°–≤–µ–∂–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</button>
          <button class="btn" id="refreshComponents">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
        <div class="muted">–ü–æ–∫–∞–∑–∞–Ω–æ: <span id="componentsCount">‚Ä¶</span></div>
      </div>
      <div id="componentsList" class="releases"></div>
    </section>

    <!-- Comments -->
    <section class="panel" id="comments">
      <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
      <p class="muted">–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π. –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å GitHub-based comments (Utterances). –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ).</p>
      <div id="utterances-container"></div>

      <div id="local-comments" style="display:none;margin-top:.5rem;">
        <form id="commentForm" class="comments-form" style="display:flex;flex-direction:column;gap:.5rem">
          <input id="commentName" class="search" placeholder="–í–∞—à–µ –∏–º—è (–∏–ª–∏ –Ω–∏–∫)" />
          <textarea id="commentText" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" style="min-height:80px;padding:.5rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit"></textarea>
          <div style="display:flex;gap:.5rem;">
            <button class="btn primary" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <button class="btn" type="button" id="clearComments">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ</button>
          </div>
        </form>

        <div id="commentsList" style="margin-top:1rem"></div>
      </div>
    </section>

    <!-- Releases with search/filter -->
    <section class="panel" id="changelog">
      <h2 style="margin-top:0">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π / –†–µ–ª–∏–∑—ã</h2>
      <div class="muted">–°–ø–∏—Å–æ–∫ —Ä–µ–ª–∏–∑–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ GitHub. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ —Å–±–æ—Ä–∫–∏.</div>
      <div style="margin-top:.75rem;display:flex;justify-content:space-between;gap:.5rem;align-items:center;flex-wrap:wrap">
        <div class="controls">
          <input id="searchReleases" class="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ä–µ–ª–∏–∑–∞–º / –≤–µ—Ä—Å–∏–∏ / –Ω–∞–∑–≤–∞–Ω–∏—é" />
          <select id="filterType" class="select">
            <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
            <option value="Ryazhenkabestcfw">BestCFW</option>
            <option value="Ryazhenka_AIO">AIO</option>
            <option value="Ryazhenka_lite">Lite</option>
          </select>
          <button class="btn" id="refreshReleases">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
        <div class="muted">–ù–∞–π–¥–µ–Ω–æ: <span id="releasesCount">‚Ä¶</span></div>
      </div>

      <div class="releases" id="releases-list" aria-live="polite"></div>
    </section>

    <!-- Gallery -->
    <section class="panel" id="gallery">
      <h2>–ì–∞–ª–µ—Ä–µ—è –ø—Ä–µ–≤—å—é –∏ –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–æ–∂–µ–∫</h2>
      <p class="muted">–ö–æ–ª–ª–µ–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–≥–æ—Ç–∏–ø–æ–≤ –∏ –ø—Ä–µ–≤—å—é –∏–∑ —Ä–µ–ª–∏–∑–æ–≤ ‚Äî –∫–ª–∏–∫–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ.</p>
      <div class="gallery" id="galleryGrid"></div>
    </section>

    <!-- Crew -->
    <section class="panel" id="crew">
      <h2>–°—Ç–µ–Ω–∞ —ç–∫–∏–ø–∞–∂–∞ / –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</h2>
      <p class="muted">–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ contributors + —Ä—É—á–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è.</p>
      <div class="crew-grid" id="crew-grid"></div>
      <div style="margin-top:.75rem" class="muted">–î–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ scripts/main.js —Å–µ–∫—Ü–∏—é manualCrew.</div>
    </section>

    <!-- Roadmap + FAQ -->
    <section class="panel" id="roadmap">
      <h2>–¶–µ–ª–∏ / –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞</h2>
      <div class="roadmap" id="roadmap-list">
        <div>‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ç—é–Ω–µ—Ä–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏</div>
        <div>‚Ä¢ –¢–µ–º—ã –∏ –ø—Ä–µ—Å–µ—Ç—ã –¥–ª—è Ryazhahand</div>
        <div>‚Ä¢ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å sys-clk –∏ –ø—Ä–æ—Ñ–∏–ª–µ–π —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è</div>
        <div>‚Ä¢ GUI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏</div>
      </div>
      <div style="margin-top:.5rem;" class="muted">–ú–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–Ω—É—Ç—å –∑–∞–¥–∞—á–∏ —Å –º–µ—Ç–∫–æ–π <code>roadmap</code>.</div>
    </section>

    <section class="panel" id="faq">
      <h2>FAQ / –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
      <div class="faq">
        <div>
          <h4>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ A/B NAND?</h4>
          <p class="muted">–î–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Hekate –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—ç–∫–∞–ø–∞–º–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏. Ryazhenka –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç –≤–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>
        </div>
        <div>
          <h4>–ö–∞–∫–∞—è —Å–±–æ—Ä–∫–∞ –º–Ω–µ –Ω—É–∂–Ω–∞?</h4>
          <p class="muted">Ryazhenka Lite ‚Äî –ø—Ä–æ—à–∏–≤–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è Nintendo Switch Lite (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è Lite). Ryazhenka BestCFW ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (–ø–æ–ª–Ω–∞—è –∏ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è). Ryazhenka AIO ‚Äî –º–æ–¥—É–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (AIO) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Ryazhenka BestCFW –∏ Ryazhenka Lite —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã/–º–æ–¥—É–ª–∏.</p>
        </div>
        <div>
          <h4>–ö–∞–∫ —Å–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ?</h4>
          <p class="muted">–û—Ç–∫—Ä–æ–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –≤ Discussions —Å –ª–æ–≥–∞–º–∏.</p>
        </div>
      </div>
    </section>

    <!-- Installation -->
    <section class="panel" id="install">
      <h2>–£—Å—Ç–∞–Ω–æ–≤–∫–∞</h2>
      <ol>
        <li>–°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–ª–∏–∑ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ <a href="#changelog">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</a>.</li>
        <li>–†–∞—Å–ø–∞–∫—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ –∫–∞—Ä—Ç—É microSD, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—ç–∫–∞–ø—ã.</li>
        <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Hekate –∏–ª–∏ –≤–∞—à –º–µ—Ç–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏.</li>
        <li>–û—Ç–∫—Ä–æ–π—Ç–µ Tesla Menu, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–ª–∞–≥–∏–Ω—ã –∏ –æ–≤–µ—Ä–ª–µ–∏.</li>
      </ol>
      <div class="cta"><a class="btn" href="https://github.com/Dimasick-git/Ryzhenka/wiki" target="_blank">–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è / Wiki</a></div>
    </section>

  </main>

  <footer>
    <div class="wrap" style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
      <div class="muted">¬© Ryazhenka ‚Äî crew.ecosystem</div>
        <div style="display:flex;gap:.5rem;align-items:center">
        <a class="btn" href="https://t.me/Ryazhenkabestcfw" target="_blank">Telegram</a>
        <a class="btn" href="https://boosty.to/dimasick-git/donate" target="_blank">Boosty</a>
        <a class="btn" href="https://github.com/Dimasick-git/Ryzhenka" target="_blank">Source</a>
        <a class="btn" href="https://www.youtube.com/@Dimaick-git" target="_blank">YouTube</a>
      </div>
    </div>
  </footer>

  <!-- Modal placeholder -->
  <!-- Stats & Widgets -->
  <div class="wrap" style="margin-top:1rem">
    <section class="panel" id="site-widgets" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;">
      <div class="widget">
        <h4 style="margin:0 0 .5rem 0">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (GitHub)</h4>
        <div id="statsGitHub">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
        <div style="margin-top:.5rem;display:flex;gap:.5rem;align-items:center;flex-wrap:wrap">
          <button class="btn" id="refreshStats">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
        <div class="muted" style="margin-top:.4rem;font-size:0.85rem">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø–æ–∫–∞–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ disabled (token removed). –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –ø–æ–ª—è–º release.assets[].download_count.</div>
      </div>

      <div class="widget">
        <h4 style="margin:0 0 .5rem 0">Boosty / –î–æ–Ω–∞—Ç—ã</h4>
        <div class="muted">Boosty: <a href="https://boosty.to/dimasick-git/donate" target="_blank">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–Ω–∞—Ç–æ–≤</a></div>
        <div style="margin-top:.5rem" class="muted">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–Ω–∞—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —Å—Å—ã–ª–∫–∞ ‚Äî –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω—É–∂–µ–Ω API-–∫–ª—é—á Boosty.</div>
      </div>

      <div class="widget">
        <h4 style="margin:0 0 .5rem 0">–í–∏–¥–µ–æ / –í–∏–¥–∂–µ—Ç</h4>
        <div style="margin-bottom:.5rem">
          <div id="ytSubscribe" style="margin-bottom:.5rem"><a class="btn" href="https://www.youtube.com/@Dimaick-git" target="_blank">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ YouTube</a></div>
          <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:8px;">
            <iframe id="featuredVideo" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Featured video" style="position:absolute;left:0;top:0;width:100%;height:100%;border:0;" allowfullscreen></iframe>
          </div>
        </div>
      </div>

      <div class="widget">
        <h4 style="margin:0 0 .5rem 0">–í–∏–¥–∂–µ—Ç—ã</h4>
        <div id="liveClock" style="font-weight:700;font-size:1.1rem;margin-bottom:.5rem">‚Äî</div>
        <div class="muted">–ù–µ–±–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤: —á–∞—Å—ã, —Å—Ç–∞—Ç—É—Å —Ä–µ–ø–æ, –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏.</div>
      </div>
    </section>
  </div>

  <div id="modal" style="display:none"></div>

  <script>
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    const owner = 'Dimasick-git';
    const repo = 'Ryzhenka';
    const apiBase = `https://api.github.com/repos/${owner}/${repo}`;
    const releasesApi = `${apiBase}/releases?per_page=100`;
    const contributorsApi = `${apiBase}/contributors?per_page=100`;
    const listEl = document.getElementById('releases-list');
    const crewGrid = document.getElementById('crew-grid');
    const galleryGrid = document.getElementById('galleryGrid');

    // Manual crew overrides / —Ä–æ–ª–∏ (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∑–¥–µ—Å—å –¥–ª—è —Ä—É—á–Ω—ã—Ö –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π)
    // Replaced helper accounts per request.
    const manualCrew = [
      { login: 'Dimasick-git', name: 'Dimasick-git', role: '–≥–ª–∞–≤–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ üöÄ' },
      { login: 'Ryazhenka-Helper-1', name: 'Ryazhenka-Helper-1', role: '–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫' },
      { login: 'Ryazhenka-Helper-01', name: 'Ryazhenka-Helper-01', role: '–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫' }
    ];

    // Theme toggle with persist and multiple themes
    const themeSwitch = document.getElementById('themeSwitch');
    const doc = document.documentElement;
    const THEME_LIST = ['glow','classic','solarized','neon'];
    function applyTheme(theme) {
      if(!theme) return;
      doc.dataset.theme = theme;
      localStorage.setItem('rz_theme', theme);
      // optional: update thumb/label UI
      const toggle = document.getElementById('themeToggle');
      if(toggle) toggle.setAttribute('data-theme', theme);
    }
    (function initTheme() {
      const stored = localStorage.getItem('rz_theme');
      const prefers = stored || doc.dataset.theme || 'glow';
      applyTheme(prefers);
    })();
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      const current = doc.dataset.theme || 'glow';
      const idx = THEME_LIST.indexOf(current);
      const next = THEME_LIST[(idx + 1) % THEME_LIST.length];
      applyTheme(next);
    });

    function fmtDate(iso) {
      if(!iso) return '';
      try { const d = new Date(iso); return d.toLocaleDateString('ru-RU', { year: 'numeric', month: 'short', day: 'numeric' }); } catch (e) { return iso; }
    }

    function bbootLogoUrl(version) { return `https://github.com/${owner}/${repo}/releases/download/${version}/bbootlogo.png`; }
    function tagUrl(version) { return `https://github.com/${owner}/${repo}/releases/tag/${encodeURIComponent(version)}`; }

    function mkCard(r) {
      const card = document.createElement('article');
      card.className = 'release-card';
      const ver = r.tag_name || r.name || '';
      const img = document.createElement('img');
      img.alt = `–õ–æ–≥–æ ${ver}`;
      img.loading = 'lazy';
      const basset = (r.assets || []).find(a => /bbootlogo/i.test(a.name));
      img.src = basset ? basset.browser_download_url : (r.assets && r.assets[0] && r.assets[0].browser_download_url) || bbootLogoUrl(ver);
      card.appendChild(img);
      // show source repo (if present)
      if(r.__source){
        const srcDiv = document.createElement('div');
        srcDiv.className = 'muted';
        srcDiv.style.fontSize = '0.85rem';
        srcDiv.textContent = `Source: ${r.__source}`;
        card.appendChild(srcDiv);
      }

      const h3 = document.createElement('h3');
      h3.textContent = r.name || ver;
      card.appendChild(h3);

      const meta = document.createElement('div');
      meta.className = 'meta';
      const date = document.createElement('span');
      date.textContent = fmtDate(r.published_at || r.created_at);
      const vspan = document.createElement('span');
      vspan.textContent = ver;
      meta.append(date, vspan);
      card.appendChild(meta);

      if (r.body) {
        const p = document.createElement('p');
        p.textContent = r.body.length > 220 ? r.body.slice(0, 220) + '‚Ä¶' : r.body;
        card.appendChild(p);
      }

      const assetsWrap = document.createElement('div');
      assetsWrap.className = 'assets';
      // Asset types with user-friendly labels and descriptions
      const assetTypes = [
        { key: 'Ryazhenkabestcfw', label: 'Ryazhenka BestCFW', desc: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞ ‚Äî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π, –∫—Ä–æ–º–µ Switch Lite. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.' },
        { key: 'Ryazhenka_AIO', label: 'Ryazhenka AIO (Updater)', desc: '–ú–æ–¥—É–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç Ryazhenka BestCFW –∏ Ryazhenka Lite —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.' },
        { key: 'Ryazhenka_lite', label: 'Ryazhenka Lite', desc: '–õ—ë–≥–∫–∞—è –ø—Ä–æ—à–∏–≤–∫–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è —Ç–æ–ª—å–∫–æ –¥–ª—è Nintendo Switch Lite (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—Ä).' }
      ];
      assetTypes.forEach(t => {
        const asset = (r.assets || []).find(a => a.name && a.name.toLowerCase().includes(t.key.toLowerCase()));
        const row = document.createElement('div');
        row.className = 'asset';
        if (asset) {
          const a = document.createElement('a');
          a.href = asset.browser_download_url;
          a.target = '_blank';
          a.textContent = `${t.label} ‚Äî ${asset.name}`;
          row.appendChild(a);
          const size = document.createElement('small');
          size.className = 'muted';
          size.style.marginLeft = 'auto';
          size.textContent = asset.size ? `${(asset.size/1024/1024).toFixed(2)} MB` : '';
          row.appendChild(size);
          const d = document.createElement('div'); d.className='muted'; d.style.fontSize='0.85rem'; d.style.marginTop='0.25rem'; d.textContent = t.desc; row.appendChild(d);
        } else {
          const span = document.createElement('div');
          span.className = 'muted';
          span.textContent = `${t.label} ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç`;
          const d = document.createElement('div'); d.className='muted'; d.style.fontSize='0.85rem'; d.style.marginTop='0.15rem'; d.textContent = t.desc; span.appendChild(d);
          row.appendChild(span);
        }
        assetsWrap.appendChild(row);
      });

      if ((r.assets || []).length > 0) {
        const more = document.createElement('details');
        more.style.marginTop = '0.5rem';
        const summary = document.createElement('summary');
        summary.textContent = `–í—Å–µ —Ñ–∞–π–ª—ã (${r.assets.length})`;
        more.appendChild(summary);
        const list = document.createElement('div');
        (r.assets || []).forEach(a => {
          const line = document.createElement('div');
          line.className = 'asset';
          const link = document.createElement('a');
          link.href = a.browser_download_url;
          link.target = '_blank';
          link.textContent = a.name;
          line.appendChild(link);
          const small = document.createElement('small');
          small.className = 'muted';
          small.style.marginLeft = 'auto';
          small.textContent = a.size ? `${(a.size/1024/1024).toFixed(2)} MB` : '';
          line.appendChild(small);
          list.appendChild(line);
        });
        more.appendChild(list);
        assetsWrap.appendChild(more);
      }

      card.appendChild(assetsWrap);

      const btnWrap = document.createElement('div');
      btnWrap.style.display = 'flex';
      btnWrap.style.gap = '.5rem';
      btnWrap.style.marginTop = '.5rem';
      const openRel = document.createElement('a');
      openRel.className = 'btn';
      openRel.href = tagUrl(ver);
      openRel.target = '_blank';
      openRel.textContent = '–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–ª–∏–∑';
      btnWrap.appendChild(openRel);
      if (r.html_url) {
        const openGH = document.createElement('a');
        openGH.className = 'btn';
        openGH.href = r.html_url;
        openGH.target = '_blank';
        openGH.textContent = 'GitHub';
        btnWrap.appendChild(openGH);
      }
      card.appendChild(btnWrap);
      return card;
    }

    // state
    let releasesData = [];
    // components state
    let componentsState = { mode: 'my', items: [] };
    // configurable list of popular components to fetch for "Fresh components" tab
    const popularComponents = [
      { owner: 'Atmosphere-NX', repo: 'Atmosphere' },
      { owner: 'CTCaer', repo: 'hekate' },
      // add more repos here if desired; ensure names are correct
    ];

    async function loadReleases() {
      try {
        listEl.innerHTML = '<p class="muted">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ª–∏–∑–æ–≤ (–∞–≥—Ä–µ–≥–∞—Ü–∏—è –∏–∑ –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∞–∫–∫–∞—É–Ω—Ç–∞)‚Ä¶</p>';
        // Simple cache to avoid hitting GitHub rate limits while developing
        const CACHE_KEY = 'rz_releases_cache_v1';
        const CACHE_TTL = 1000 * 60 * 10; // 10 minutes
        try{
          const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
          if(cached && Array.isArray(cached.items) && (Date.now() - (cached.ts||0) < CACHE_TTL)){
            releasesData = cached.items;
            renderReleases();
            renderGallery();
            // still refresh in background if you want, but skip to return speed
            return;
          }
        }catch(e){ /* ignore cache parse errors */ }
        // Fetch releases from your account repos and popular components in parallel
        const [ownerResults, popularResults] = await Promise.all([
          loadOwnerReleases(owner, 80, 5),
          loadReposReleases(popularComponents, 3)
        ]);

        const combined = [];
        // ownerResults: array of { owner, repo, release }
        ownerResults.forEach(x => { if(x && x.release){ const copy = Object.assign({}, x.release); copy.__source = `${x.owner}/${x.repo}`; combined.push(copy); } });
        // popularResults: similar
        popularResults.forEach(x => { if(x && x.release){ const copy = Object.assign({}, x.release); copy.__source = `${x.owner}/${x.repo}`; combined.push(copy); } });

        // Also ensure primary repo's full releases are included
        try{
          const r = await fetch(releasesApi);
          if(r.ok){ const rr = await r.json(); rr.forEach(rel => { rel.__source = `${owner}/${repo}`; combined.push(rel); }); }
        }catch(e){ /* ignore */ }

        // dedupe by html_url or id
        const seen = new Set();
        const dedup = [];
        combined.sort((a,b) => new Date(b.published_at || b.created_at) - new Date(a.published_at || a.created_at));
        for(const it of combined){
          const key = it.html_url || (it.id ? String(it.id) : (it.tag_name || it.name || ''));
          if(seen.has(key)) continue; seen.add(key); dedup.push(it);
        }
        // limit for performance
        releasesData = dedup.slice(0, 200);
        // store cache
        try{ localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), items: releasesData })); }catch(e){}
        renderReleases();
        renderGallery();
      } catch (e) {
        listEl.innerHTML = '<p class="muted">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–ª–∏–∑—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>';
        console.error(e);
      }
    }

    // compact card used for components list (short description)
    function mkCompactCard(r, source){
      const card = document.createElement('article');
      card.className = 'release-card';
      const title = document.createElement('h3'); title.textContent = `${r.name || r.tag_name || '(–±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è)'} ‚Äî ${source}`;
      card.appendChild(title);
      const meta = document.createElement('div'); meta.className='meta';
      const date = document.createElement('span'); date.textContent = fmtDate(r.published_at || r.created_at);
      const ver = document.createElement('span'); ver.textContent = r.tag_name || '';
      meta.append(date, ver); card.appendChild(meta);
      if(r.body){ const p=document.createElement('p'); p.textContent = r.body.length>180? r.body.slice(0,180)+'‚Ä¶' : r.body; card.appendChild(p); }
      const btnWrap = document.createElement('div'); btnWrap.style.display='flex'; btnWrap.style.gap='.5rem'; btnWrap.style.marginTop='.5rem';
      const open = document.createElement('a'); open.className='btn'; open.href = r.html_url || '#'; open.target='_blank'; open.textContent='–û—Ç–∫—Ä—ã—Ç—å'; btnWrap.appendChild(open);
      card.appendChild(btnWrap);
      return card;
    }

    // Fetch latest releases for all public repos of an owner (limitRepos controls repos, perRepoReleases controls how many releases per repo)
    async function loadOwnerReleases(owner, limitRepos=30, perRepoReleases=3){
      const reposApi = `https://api.github.com/users/${owner}/repos?per_page=100`;
      try{
        const res = await fetch(reposApi);
        if(!res.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏');
        const repos = await res.json();
        const selected = repos.slice(0, limitRepos);
        const results = [];
        // fetch releases per repo in small batches to reduce rate pressure
        for(const r of selected){
          try{
            const relRes = await fetch(`https://api.github.com/repos/${owner}/${r.name}/releases?per_page=${perRepoReleases}`);
            if(!relRes.ok) continue;
            const rels = await relRes.json();
            if(Array.isArray(rels) && rels.length>0){
              rels.forEach(rel => results.push({ repo: r.name, owner, release: rel }));
            }
          }catch(e){ console.warn('release fetch error', e); }
        }
        return results;
      }catch(e){ console.error(e); return []; }
    }

    // Fetch releases for a list of owner/repo pairs (popular components)
    async function loadReposReleases(list, perRepoReleases=2){
      const results = [];
      for(const it of list){
        try{
          const relRes = await fetch(`https://api.github.com/repos/${it.owner}/${it.repo}/releases?per_page=${perRepoReleases}`);
          if(!relRes.ok) { console.warn('no release for', it.owner+'/'+it.repo); continue; }
          const rels = await relRes.json();
          if(Array.isArray(rels) && rels.length>0) rels.forEach(rel => results.push({ repo: it.repo, owner: it.owner, release: rel }));
        }catch(e){ console.warn('error fetching', it, e); }
      }
      return results;
    }

    async function renderComponents(){
      const listEl = document.getElementById('componentsList');
      listEl.innerHTML = '<p class="muted">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</p>';
      try{
        let items = [];
        if(componentsState.mode === 'my'){
          const ownerResults = await loadOwnerReleases(owner, 30);
          ownerResults.forEach(r => items.push(Object.assign({}, r.release, { __source: r.owner + '/' + r.repo })));
        } else {
          const popular = await loadReposReleases(popularComponents);
          popular.forEach(r => items.push(Object.assign({}, r.release, { __source: r.owner + '/' + r.repo })));
        }
        componentsState.items = items;
        document.getElementById('componentsCount').textContent = items.length;
        listEl.innerHTML = '';
        if(items.length === 0){ listEl.innerHTML = '<p class="muted">–ù–µ—Ç –Ω–æ–≤—ã—Ö —Ä–µ–ª–∏–∑–æ–≤.</p>'; return; }
        items.forEach(it => {
          const card = mkCompactCard(it, it.__source || '');
          listEl.appendChild(card);
        });
      }catch(e){ listEl.innerHTML = '<p class="muted">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.</p>'; console.error(e); }
    }

    // Stats: GitHub repo stats, total downloads (tokenless)
    async function fetchStats(){
      const el = document.getElementById('statsGitHub');
      if(!el) return;
      el.innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶';
      const headers = { 'Accept':'application/vnd.github.v3+json' };
      try{
        const repoRes = await fetch(apiBase, { headers });
        if(!repoRes.ok){
          el.innerHTML = `<div class="muted">–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: ${repoRes.status}</div>`;
          return;
        }
        const repoJson = await repoRes.json();
        const stars = repoJson.stargazers_count || 0;
        const forks = repoJson.forks_count || 0;
        const watchers = repoJson.watchers_count || repoJson.subscribers_count || 0;

        // compute downloads from releases data (asset.download_count)
        let totalDownloads = 0;
        let rels = releasesData && releasesData.length ? releasesData : [];
        if(!rels || rels.length === 0){
          try{ const rr = await fetch(releasesApi, { headers }); if(rr.ok) rels = await rr.json(); }catch(e){}
        }
        (rels || []).forEach(r => { (r.assets||[]).forEach(a => { if (typeof a.download_count === 'number') totalDownloads += a.download_count; }); });

        // Render (no traffic/views call ‚Äî token removed)
        let html = `<div>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: <a href="https://github.com/${owner}/${repo}" target="_blank">${owner}/${repo}</a></div>`;
        html += `<div style="margin-top:.35rem">‚≠ê Stars: <strong>${stars}</strong> ‚Ä¢ üç¥ Forks: ${forks} ‚Ä¢ üëÄ Watchers: ${watchers}</div>`;
        html += `<div style="margin-top:.35rem">‚¨áÔ∏è –°–∫–∞—á–∏–≤–∞–Ω–∏–π (asset.download_count): <strong>${totalDownloads}</strong></div>`;
        html += `<div style="margin-top:.35rem" class="muted">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (token –±—ã–ª —É–¥–∞–ª—ë–Ω)</div>`;
        html += `<div style="margin-top:.25rem" class="muted">–†–µ–ª–∏–∑–æ–≤ —É—á—Ç–µ–Ω–æ: ${rels.length}</div>`;
        el.innerHTML = html;
      }catch(e){ el.innerHTML = '<div class="muted">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.</div>'; console.error(e); }
    }

    // Live clock widget
    function updateClock(){ const el = document.getElementById('liveClock'); if(el) el.textContent = new Date().toLocaleString(); }

    // Utility: is image filename
    function isImageName(name){ return !!(name && /\.(png|jpe?g|gif|webp|bmp)$/i.test(name)); }

    // Background refresh: check for new releases periodically and update cache + UI
    async function backgroundRefreshReleases(){
      try{
        // fetch a fresh aggregated set (small per-repo to limit calls)
        const ownerResults = await loadOwnerReleases(owner, 40, 2);
        const popularResults = await loadReposReleases(popularComponents, 1);
        const combined = [];
        ownerResults.forEach(x=>{ if(x && x.release){ const copy = Object.assign({}, x.release); copy.__source = `${x.owner}/${x.repo}`; combined.push(copy); } });
        popularResults.forEach(x=>{ if(x && x.release){ const copy = Object.assign({}, x.release); copy.__source = `${x.owner}/${x.repo}`; combined.push(copy); } });
        // include primary repo releases too
        try{ const r = await fetch(releasesApi); if(r.ok){ const rr = await r.json(); rr.forEach(rel => { rel.__source = `${owner}/${repo}`; combined.push(rel); }); } }catch(e){}

        combined.sort((a,b) => new Date(b.published_at || b.created_at) - new Date(a.published_at || a.created_at));
        const newKeys = combined.map(it => it.html_url || (it.id?String(it.id):it.tag_name||it.name)).filter(Boolean);
        const oldKeys = (releasesData||[]).map(it => it.html_url || (it.id?String(it.id):it.tag_name||it.name)).filter(Boolean);
        // detect any key not present previously
        const added = newKeys.some(k => !oldKeys.includes(k));
        if(added){
          // update cache and releasesData
          const seen = new Set(); const dedup = [];
          for(const it of combined){ const key = it.html_url || (it.id?String(it.id):it.tag_name||it.name||''); if(!key) continue; if(seen.has(key)) continue; seen.add(key); dedup.push(it); }
          releasesData = dedup.slice(0, 200);
          try{ localStorage.setItem('rz_releases_cache_v1', JSON.stringify({ ts: Date.now(), items: releasesData })); }catch(e){}
          // show notice
          const notice = document.getElementById('newReleasesNotice');
          const cnt = document.getElementById('newReleasesCount');
          if(notice && cnt){ cnt.textContent = `–ù–∞–π–¥–µ–Ω—ã –Ω–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã (${releasesData.length})`; notice.style.display='block'; }
        }
      }catch(e){ console.warn('background refresh failed', e); }
    }

    function matchesFilter(r, q, type) {
      const ver = (r.tag_name || r.name || '').toLowerCase();
      const title = (r.name || '').toLowerCase();
      const body = (r.body || '').toLowerCase();
      const combined = [ver,title,body].join(' ');
      const qOk = !q || combined.includes(q.toLowerCase());
      let typeOk = true;
      if (type && type !== 'all') {
        typeOk = (r.assets || []).some(a => a.name && a.name.toLowerCase().includes(type.toLowerCase()));
      }
      return qOk && typeOk;
    }

    function renderReleases() {
      const q = (document.getElementById('searchReleases')||{}).value || '';
      const type = (document.getElementById('filterType')||{}).value || 'all';
      listEl.innerHTML = '';
      const filtered = releasesData.filter(r => matchesFilter(r,q,type));
      document.getElementById('releasesCount').textContent = filtered.length;
      if (filtered.length === 0) {
        listEl.innerHTML = '<p class="muted">–†–µ–ª–∏–∑–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É.</p>';
        return;
      }
      filtered.forEach(r => listEl.appendChild(mkCard(r)));
    }

    // Gallery rendering: use bbootlogo or first asset image
    function renderGallery() {
      galleryGrid.innerHTML = '';
      // prioritize Ryzhenka repo images first
      const ordered = (releasesData||[]).slice().sort((a,b)=>{
        const aIsMain = (a.__source||'').toLowerCase().startsWith(`${owner.toLowerCase()}/${repo.toLowerCase()}`);
        const bIsMain = (b.__source||'').toLowerCase().startsWith(`${owner.toLowerCase()}/${repo.toLowerCase()}`);
        if(aIsMain && !bIsMain) return -1;
        if(!aIsMain && bIsMain) return 1;
        return new Date(b.published_at||b.created_at) - new Date(a.published_at||a.created_at);
      });
      ordered.forEach(r => {
        const ver = r.tag_name || r.name || '';
        // collect image assets (gif/png/jpg/webp)
        const images = (r.assets || []).filter(a => isImageName(a.name)).map(a=>({ url: a.browser_download_url, name: a.name }));
        // if no images in assets, try bbootlogo or repo avatar
        if(images.length === 0){
          const basset = (r.assets || []).find(a => /bbootlogo|logo|cover|preview/i.test(a.name));
          if(basset) images.push({ url: basset.browser_download_url, name: basset.name });
          else images.push({ url: bbootLogoUrl(ver), name: 'bbootlogo' });
        }
        // append up to 3 images per release to gallery
        for(let i=0;i<Math.min(3, images.length); i++){
          const src = images[i].url;
          const img = document.createElement('img');
          img.src = src;
          img.alt = `${ver}` + (images[i].name ? ' ‚Äî ' + images[i].name : '');
          if(/\.gif$/i.test(images[i].name || '')){ img.dataset.isGif = '1'; img.title = 'GIF preview ‚Äî –∫–ª–∏–∫–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å'; }
          img.dataset.rel = r.html_url || tagUrl(ver);
          img.addEventListener('click', () => openModal(src, r));
          galleryGrid.appendChild(img);
        }
      });
    }

    // Modal
    function openModal(src, r) {
      const modal = document.getElementById('modal');
      modal.innerHTML = '';
      modal.style.display = 'flex';
      const inner = document.createElement('div');
      inner.className = 'inner';
      const img = document.createElement('img');
      img.src = src;
      inner.appendChild(img);
      const meta = document.createElement('div');
      meta.style.padding = '0.6rem';
      meta.style.background = 'var(--card-bg)';
      meta.style.display = 'flex';
      meta.style.justifyContent = 'space-between';
      meta.style.alignItems = 'center';
      const left = document.createElement('div');
      left.innerHTML = `<strong style="font-size:1rem">${r.name || r.tag_name}</strong><div class="muted">${fmtDate(r.published_at||r.created_at)}</div>`;
      const right = document.createElement('div');
      const a = document.createElement('a'); a.href = r.html_url || tagUrl(r.tag_name||r.name); a.target = '_blank'; a.className='btn'; a.textContent='–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–ª–∏–∑';
      right.appendChild(a);
      meta.append(left,right);
      inner.appendChild(meta);
      modal.appendChild(inner);
      modal.addEventListener('click', (e)=>{ if (e.target===modal) modal.style.display='none'; });
    }

    // Crew loading
    async function loadCrew() {
      try {
        crewGrid.innerHTML = '<p class="muted">–ó–∞–≥—Ä—É–∑–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤‚Ä¶</p>';
        const res = await fetch(contributorsApi);
        if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤');
        const contributors = await res.json();
        const manualMap = new Map(manualCrew.map(m => [m.login.toLowerCase(), m]));
        const people = contributors.map(c => {
          const login = c.login;
          const mm = manualMap.get(login.toLowerCase());
          return { login, avatar: c.avatar_url, contributions: c.contributions, role: mm ? mm.role : '' };
        });
        manualCrew.forEach(m => {
          if (!people.find(p => p.login.toLowerCase() === m.login.toLowerCase())) {
            people.unshift({ login: m.login, avatar: `https://github.com/${m.login}.png`, contributions: 0, role: m.role || '' });
          }
        });
        crewGrid.innerHTML = '';
        people.forEach(p => {
          const card = document.createElement('div'); card.className='crew-card';
          const img = document.createElement('img'); img.src=p.avatar; img.alt=p.login; card.appendChild(img);
          const info = document.createElement('div');
          const name = document.createElement('div'); const link = document.createElement('a'); link.href=`https://github.com/${p.login}`; link.target='_blank'; link.textContent=p.login; name.appendChild(link);
          info.appendChild(name);
          if (p.role) { const role = document.createElement('div'); role.className='muted'; role.textContent=p.role; role.style.fontSize='.9rem'; info.appendChild(role); }
          const contrib = document.createElement('div'); contrib.className='muted'; contrib.style.fontSize='.85rem'; contrib.textContent=`Commits: ${p.contributions||0}`; info.appendChild(contrib);
          card.appendChild(info); crewGrid.appendChild(card);
        });
      } catch (e) {
        crewGrid.innerHTML = '<p class="muted">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.</p>';
        console.error(e);
      }
    }

    // Comments: try Utterances (GitHub issues) first, fallback to localStorage comments
    function loadUtterances(){
      const container = document.getElementById('utterances-container');
      if(!container) return showLocalComments();
      const script = document.createElement('script');
      script.src = 'https://utteranc.es/client.js';
      script.async = true;
      script.setAttribute('repo','Dimasick-git/Ryzhenka');
      // issue-term controls how comments are grouped: pathname -> per-page
      script.setAttribute('issue-term','pathname');
      script.setAttribute('theme','github-light');
      script.crossOrigin = 'anonymous';
      script.onerror = function(){
        console.warn('Utterances failed to load; falling back to local comments.');
        showLocalComments();
      };
      container.appendChild(script);
    }

    // Local comments implementation
    const COMMENTS_KEY = 'rz_local_comments';
    function loadLocalComments(){ try { return JSON.parse(localStorage.getItem(COMMENTS_KEY)||'[]'); } catch(e){ return []; } }
    function saveLocalComments(arr){ localStorage.setItem(COMMENTS_KEY, JSON.stringify(arr||[])); }
    function escapeHtml(s){ return (s||'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;').replace(/\'/g,'&#039;'); }
    function renderLocalComments(){ const list = document.getElementById('commentsList'); if(!list) return; const comments = loadLocalComments().slice().reverse(); if(!comments.length){ list.innerHTML = '<div class="muted">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</div>'; return; } list.innerHTML=''; comments.forEach(c=>{ const node = document.createElement('div'); node.className='comment-card'; node.innerHTML = `<div style="display:flex;justify-content:space-between"><strong>${escapeHtml(c.name||'–ê–Ω–æ–Ω–∏–º')}</strong><small class="muted">${new Date(c.date).toLocaleString()}</small></div><div style="margin-top:.4rem">${escapeHtml(c.text)}</div>`; list.appendChild(node); }); }
    function showLocalComments(){ const ut = document.getElementById('utterances-container'); if(ut) ut.style.display='none'; const local = document.getElementById('local-comments'); if(local) local.style.display='block'; renderLocalComments(); }

    // form handling
    document.addEventListener('submit', function(e){
      if(e.target && e.target.id === 'commentForm'){
        e.preventDefault();
        const name = document.getElementById('commentName').value.trim() || '–ê–Ω–æ–Ω–∏–º';
        const text = document.getElementById('commentText').value.trim();
        if(!text) return;
        const arr = loadLocalComments();
        arr.push({ name, text, date: new Date().toISOString() });
        saveLocalComments(arr);
        document.getElementById('commentText').value = '';
        renderLocalComments();
      }
    });
    document.addEventListener('click', function(e){ if(e.target && e.target.id === 'clearComments'){ if(confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏?')){ localStorage.removeItem(COMMENTS_KEY); renderLocalComments(); } } });

    // Init
    (function init(){
      document.getElementById('searchReleases')?.addEventListener('input', () => renderReleases());
      document.getElementById('filterType')?.addEventListener('change', () => renderReleases());
      document.getElementById('refreshReleases')?.addEventListener('click', () => loadReleases());
      loadReleases();
      loadCrew();
      // try to load utterances comments; if it fails, fallback will show local form
      loadUtterances();
      // components tabs
      document.getElementById('tabMyReleases')?.addEventListener('click', ()=>{ componentsState.mode='my'; renderComponents(); });
      document.getElementById('tabFresh')?.addEventListener('click', ()=>{ componentsState.mode='fresh'; renderComponents(); });
      document.getElementById('refreshComponents')?.addEventListener('click', ()=> renderComponents());
      // initial render components
      renderComponents();
  // wire stats UI
  document.getElementById('refreshStats')?.addEventListener('click', ()=> fetchStats());
      // start clock and fetch initial stats
      updateClock(); setInterval(updateClock,1000);
      fetchStats();
      // background refresh every 5 minutes
      try{ setInterval(backgroundRefreshReleases, 1000 * 60 * 5); document.getElementById('showNewReleases')?.addEventListener('click', ()=>{ document.getElementById('newReleasesNotice').style.display='none'; renderReleases(); renderGallery(); }); }catch(e){}
      window.RZ = { loadReleases, loadCrew, manualCrew, renderComponents, fetchStats, backgroundRefreshReleases };
    })();

  </script>
</body>
</html>
